title: 好久不见，mqtt
date: 2015-2-22 13:44:12
tags:
- mqtt
categories: TCP/IP
toc: false
---

公司新项目可能会用到推送，于是又重拾了有近1年时间没碰过的mqtt。而对于‘推送’本身，当初在选择实现的时候也是作了几番比较，现简要回顾一下。

一般此类的解决方案网上分为了几类（这里就忽略了pull）：

1. C2DM云端推送功能；
2. MQTT协议实现Android推送功能；
3. XMPP协议实现Android推送功能；
4. 第三方推送平台。

对于第一种，C2DM需要依赖于Google官方提供的C2DM服务器，在国内这个基本不靠谱，放弃。MQTT是一个轻量级的消息发布/订阅协议，也是后来我准备采用的解决方案，实现它的客户端和服务器又丰富。接着是xmpp，该协议较复杂、冗余（基于XML）、费流量、费电，放弃。最后是第三方平台，确实，优点很明显（人家专门做这个，稳定先进），也符合了当前大环境下的web serivce的思想，把不是自己产品的核心功能，靠第三方完成，比如多说。但是，使用第三方会使用人家的服务器，感觉有些地方会受限，而且万一哪天就不免费了呢？<!-- more -->

综上，最终我还是准备采用MQTT协议实现Android推送功能，这里给几个参考，

1. MQTT的[官网](http://mqtt.org/ "mqtt") 地址
2. MQTT[协议](http://joyexpr.com/2013/11/27/mqtt/#msg-id )的中文翻译
3. MQTT的[服务器端](https://github.com/mcollina/mosca)(mosca)实现
4. MQTT协议[解析](http://www.blogjava.net/yongboy/archive/2014/02/09/409630.html )

mosca是我准备使用的mqtt服务器，我看在github上作者还是一直在维护着它，而且是node.js实现的，比较对我的胃口。另外学习MQTT并使用好这个推送服务器，第一重要的就应该是清楚它的协议咯，看看人家的设计，这也对以后debug项目的时候有很大的帮助，不然抓包下来分析，你都不知data里面字节对应的意思都不清楚~囧

后续可能会笔记学习MQTT的相关知识，以及在使用mosca时遇到的一些问题，此次只是为实现推送而引出MQTT的一篇前言~或者说是对技术选型的一次回顾吧，并没有涉及到MQTT里面的知识。

